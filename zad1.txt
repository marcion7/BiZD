CREATE TABLE REGIONS(region_id INT PRIMARY KEY,region_name VARCHAR2(60));
CREATE TABLE COUNTRIES(country_id INT PRIMARY KEY, region_id INT);
ALTER TABLE COUNTRIES DROP COLUMN country_name;
ALTER TABLE COUNTRIES ADD country_name VARCHAR2(40);
CREATE TABLE LOCATIONS(location_id INT PRIMARY KEY,street_address VARCHAR2(60), postal_code VARCHAR2(10), city VARCHAR2(30), state_province VARCHAR2(50), country_id INT);
CREATE TABLE DEPARTMENTS(department_id INT PRIMARY KEY,department_name VARCHAR2(40), manager_id INT, location_id INT);
CREATE TABLE JOB_HISTORY(employee_id INT,start_date DATE, job_id INT, department_id INT, PRIMARY KEY (employee_id, start_date));
ALTER TABLE JOB_HISTORY DROP COLUMN end_date;
ALTER TABLE JOB_HISTORY ADD end_date DATE;
CREATE TABLE JOBS(job_id INT PRIMARY KEY,job_title VARCHAR2(20), min_salary INT, max_salary INT);
CREATE TABLE EMPLOYEES(employee_id INT PRIMARY KEY,first_name VARCHAR2(20), last_name Varchar2(20), phone_number INT, hire_date Date, job_id INT, salary INT, commission_pct INT, manager_id INT, department_id INT);
ALTER TABLE EMPLOYEES DROP COLUMN email;
ALTER TABLE EMPLOYEES ADD email Varchar2(30);
ALTER TABLE COUNTRIES ADD FOREIGN KEY (region_id) REFERENCES REGIONS(region_id);
ALTER TABLE LOCATIONS ADD FOREIGN KEY (country_id) REFERENCES COUNTRIES(country_id);
ALTER TABLE DEPARTMENTS ADD FOREIGN KEY (location_id) REFERENCES LOCATIONS(location_id);
ALTER TABLE DEPARTMENTS ADD FOREIGN KEY (manager_id) REFERENCES EMPLOYEES(employee_id);
ALTER TABLE JOB_HISTORY ADD FOREIGN KEY (department_id) REFERENCES DEPARTMENTS(department_id);
ALTER TABLE JOB_HISTORY ADD FOREIGN KEY (job_id) REFERENCES JOBS(job_id);
ALTER TABLE JOB_HISTORY ADD FOREIGN KEY (employee_id) REFERENCES EMPLOYEES(employee_id);
ALTER TABLE EMPLOYEES ADD FOREIGN KEY (job_id) REFERENCES JOBS(job_id);
ALTER TABLE EMPLOYEES ADD FOREIGN KEY (department_id) REFERENCES DEPARTMENTS(department_id);
ALTER TABLE EMPLOYEES ADD FOREIGN KEY (manager_id) REFERENCES EMPLOYEES(employee_id);
ALTER TABLE JOBS ADD CHECK (min_salary+2000 <= max_salary);
DROP TABLE REGIONS;
FLASHBACK TABLE REGIONS TO BEFORE DROP;
